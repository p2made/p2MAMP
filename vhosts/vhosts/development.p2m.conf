<VirtualHost *:80>
	ServerName development.p2m
	ServerAlias www.development.p2m
	Redirect permanent / https://development.p2m/
</VirtualHost>

<VirtualHost _default_:443>
	ServerName development.p2m
	ServerAdmin admin@example.com
	DocumentRoot /var/www/Sites/yii_development/frontend/web
	DirectoryIndex index.php

	SSLEngine on
	SSLCertificateFile /etc/apache2/sites-available/development.p2m.cert
	SSLCertificateKeyFile /etc/apache2/sites-available/development.p2m.key

	<Directory /var/www/Sites/yii_development/frontend/web>
		# Allow .htaccess rewrite rules
		Options Indexes FollowSymLinks
		AllowOverride All
		Require all granted

		<IfModule mod_deflate.c>
			SetOutputFilter DEFLATE
			SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary
			SetEnvIfNoCase Request_URI \.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary
			SetEnvIfNoCase Request_URI \.pdf$ no-gzip dont-vary

			BrowserMatch ^Mozilla/4 gzip-only-text/html
			BrowserMatch ^Mozilla/4\.0[678] no-gzip
			BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
		</IfModule>
	</Directory>

	ErrorLog "/var/log/apache2/development.p2m-error_log"
	CustomLog "/var/log/apache2/development.p2m-access_log" common
</VirtualHost>

<VirtualHost *:80>
	ServerName hq.development.p2m
	ServerAlias www.hq.development.p2m
	Redirect permanent / https://hq.development.p2m/
</VirtualHost>

<VirtualHost _default_:443>
	ServerName hq.development.p2m
	ServerAdmin admin@example.com
	DocumentRoot /var/www/Sites/yii_development/backend/web
	DirectoryIndex index.php

	SSLEngine on
	SSLCertificateFile /etc/apache2/sites-available/development.p2m.cert
	SSLCertificateKeyFile /etc/apache2/sites-available/development.p2m.key

	<Directory /var/www/Sites/yii_development/backend/web>
		# Allow .htaccess rewrite rules
		Options Indexes FollowSymLinks
		AllowOverride All
		Require all granted

		<IfModule mod_deflate.c>
			SetOutputFilter DEFLATE
			SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary
			SetEnvIfNoCase Request_URI \.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary
			SetEnvIfNoCase Request_URI \.pdf$ no-gzip dont-vary

			BrowserMatch ^Mozilla/4 gzip-only-text/html
			BrowserMatch ^Mozilla/4\.0[678] no-gzip
			BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
		</IfModule>
	</Directory>

	ErrorLog "/var/log/apache2/development.p2m-error_log"
	CustomLog "/var/log/apache2/development.p2m-access_log" common
</VirtualHost>

<VirtualHost *:80>
	ServerName dev.development.p2m
	ServerAlias www.dev.development.p2m
	Redirect permanent / https://dev.development.p2m/
</VirtualHost>

<VirtualHost _default_:443>
	ServerName dev.development.p2m
	ServerAdmin admin@example.com
	DocumentRoot /var/www/Sites/dev
	DirectoryIndex index.php

	SSLEngine on
	SSLCertificateFile /etc/apache2/sites-available/development.p2m.cert
	SSLCertificateKeyFile /etc/apache2/sites-available/development.p2m.key

	<Directory /var/www/Sites/dev>
		# Allow .htaccess rewrite rules
		Options Indexes FollowSymLinks
		AllowOverride All
		Require all granted

		<IfModule mod_deflate.c>
			SetOutputFilter DEFLATE
			SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary
			SetEnvIfNoCase Request_URI \.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary
			SetEnvIfNoCase Request_URI \.pdf$ no-gzip dont-vary

			BrowserMatch ^Mozilla/4 gzip-only-text/html
			BrowserMatch ^Mozilla/4\.0[678] no-gzip
			BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
		</IfModule>
	</Directory>

	ErrorLog "/var/log/apache2/development.p2m-error_log"
	CustomLog "/var/log/apache2/development.p2m-access_log" common
</VirtualHost>

<VirtualHost *:80>
	ServerName static.development.p2m
	ServerAlias www.static.development.p2m
	Redirect permanent / https://static.development.p2m/
</VirtualHost>

<VirtualHost _default_:443>
	ServerName static.development.p2m
	ServerAdmin admin@example.com
	DocumentRoot /var/www/Sites/yii_development/assets/web
	DirectoryIndex index.php

	SSLEngine on
	SSLCertificateFile /etc/apache2/sites-available/development.p2m.cert
	SSLCertificateKeyFile /etc/apache2/sites-available/development.p2m.key

	<Directory /var/www/Sites/yii_development/assets/web>
		# Allow .htaccess rewrite rules
		Options Indexes FollowSymLinks
		AllowOverride All
		Require all granted

		<IfModule mod_deflate.c>
			SetOutputFilter DEFLATE
			SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary
			SetEnvIfNoCase Request_URI \.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary
			SetEnvIfNoCase Request_URI \.pdf$ no-gzip dont-vary

			BrowserMatch ^Mozilla/4 gzip-only-text/html
			BrowserMatch ^Mozilla/4\.0[678] no-gzip
			BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
		</IfModule>
	</Directory>

	ErrorLog "/var/log/apache2/development.p2m-error_log"
	CustomLog "/var/log/apache2/development.p2m-access_log" common
</VirtualHost>
